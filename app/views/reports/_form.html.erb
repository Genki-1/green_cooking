<!-- コメント入力フォーム ------------------------------------------------------------>
<%= form_with(model: [recipe, report], url: recipe_reports_path(recipe) ) do |f| %>
    <%= f.attachment_field :image, class: "image_form achment_field", id: "image_select" %>
    <%= attachment_image_tag report, :image,:fill, 100,100,fallback: "no_image.jpg", size:'100x100', id: "report_file-preview" %>
    <%= f.text_area :content, class: "report_input-mysize" %>
    <%= f.submit "送信", class: "btn btn-outline-dark report-submit float-right" %>
<% end %>

<script>
  document.getElementById('image_select').addEventListener('change', function (e) {
    // 1枚だけ表示する
    var file = e.target.files[0];

    // ファイルのブラウザ上でのURLを取得する
    var blobUrl = window.URL.createObjectURL(file);

    // img要素に表示
    var img = document.getElementById('report_file-preview');
    img.src = blobUrl;
});
</script>